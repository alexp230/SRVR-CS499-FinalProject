<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browse Menus</title>
    <!-- Link to CSS page -->
    <link rel="stylesheet" type="text/css" href="../static/styles.css">
</head>
<body>

<!-- Navbar -->
<header>
    <div class="left-section">
        <a href="browsemenus.html" class="logo">SRVR<i class="bi bi-badge-tm"></i></a>
    </div>

    <div class="center-section">
        <nav class="navbar">
            <a href="{{ url_for ('browsemenu') }}">Browse Menu</a>
            <a href="howitworks.html">How it Works</a>
            <a href="aboutus.html">About Us</a>
        </nav>
    </div>

    <div class="right-section">
        <nav class="navbar">
            <a href="login.html">Cart</a>
            <a href="account.html">Account</a>
        </nav>
    </div>
</header>

<h1 style="text-align: center; margin-top: 25px">Explore Our Meals</h1>

<!-- Navbar for meal selection -->
<div class="meal-selection">
    <nav class="meal-navbar">
        <select id="categoryDropdown" onchange="loadMeals()">
            {% set categories = [] %}
            {% for meal in all_meals %}
                {% if meal.category not in categories %}
                    <option value="{{ meal.category }}">{{ meal.category }}</option>
                    {% set _ = categories.append(meal.category) %}
                {% endif %}
            {% endfor %}
            <!-- {% for meal in all_meals%}
            <option value="{{meal.category}}">{{meal.category}}</option>
            {% endfor %}
            <option value="Seafood">Seafood</option>
            <option value="Italian">Italian</option>
            <option value="BBQ">BBQ</option>
            <option value="Sandwich">Sandwich</option>
            <option value="Chicken">Chicken</option>
            <option value="Desserts">Desserts</option> -->
        </select>
    </nav>
</div>

<!-- Section for displaying meals -->
<div class="all-meals-contents">
    <div class="grid-container">
        <div class="meals-grid-item">
            <div id="mealsContainer"></div>
        </div>
    </div>
</div>
<script>
    
function loadMeals() {
    const category = document.getElementById("categoryDropdown").value;
    const url = `/category/${category}`;

    fetch(url)
        .then(response => response.json())
        .then(data => {
            const mealsContainer = document.getElementById("mealsContainer");
            // Clear existing meals
            mealsContainer.innerHTML = "";
            // Display meals on the page
            data.forEach(meal => {
                const mealDiv = document.createElement('div');
                mealDiv.innerHTML = `<img src="${meal.photo_URL}" alt="${meal.name}"><p>${meal.name}</p>`;
                mealsContainer.appendChild(mealDiv);
            });
        });
}

window.onload = loadMeals;
</script>

</body>
</html>
